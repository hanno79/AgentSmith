========================================
CHANGELOG - AgentSmith Multi-Agent POC
========================================

Author: rahn
Erstellt: 24.01.2026

========================================
FORMAT FÜR NEUE EINTRÄGE
========================================

# ÄNDERUNG [TT.MM.YYYY]: [Kurze Begründung]
# [Ausführliche Beschreibung der Änderung]
# Betroffene Dateien: [Liste der geänderten Dateien]

========================================
VERSIONSHISTORIE
========================================

----------------------------------------
Version 0.10 - 03.02.2026
----------------------------------------

# ÄNDERUNG [03.02.2026]: ROOT-CAUSE-FIX - PatchMode-Fallback bei fehlenden Dateien
# Symptom: Log zeigte "PatchMode-Fallback: keine betroffenen Dateien" obwohl Error-Kontext
#          vorhanden war. Das führte zu unnötigen FullMode-Regenerierungen.
# Ursache: _get_affected_files_from_feedback() nutzte nur Regex-Patterns für explizite
#          Dateinamen. Wenn keine Dateinamen im Feedback waren, wurde FullMode aktiviert.
# Lösung: Fallback auf alle Code-Dateien aus manager.current_code wenn keine expliziten
#         Dateien gefunden werden. PatchMode bleibt aktiv, alle Dateien werden gepatcht.
# Betroffene Dateien: backend/dev_loop_coder.py

# ÄNDERUNG [03.02.2026]: ROOT-CAUSE-FIX - Modellwechsel wird jetzt tatsächlich ausgeführt
# Symptom: ForceModelSwitch wurde geloggt, aber das Modell blieb gleich (z.B. kimi-k2.5).
# Ursache: ForceModelSwitch setzte model_attempt nicht auf max_model_attempts. Die Funktion
#          handle_model_switch() prüft "if model_attempt < max_model_attempts" und kehrt
#          dann sofort zurück ohne Wechsel durchzuführen.
# Lösung: Bei ForceModelSwitch wird model_attempt auf max_model_attempts gesetzt, sodass
#         handle_model_switch() den Modellwechsel tatsächlich durchführt.
# Betroffene Dateien: backend/dev_loop.py

----------------------------------------
Version 0.9 - 03.02.2026
----------------------------------------

# ÄNDERUNG [03.02.2026]: ROOT-CAUSE-FIX - Modellwechsel löst nicht mehr FullMode aus
# Symptom: Nach automatischem Modellwechsel (z.B. in Iteration 9 mit 29 behobenen Fehlern)
#          wurde der Modus auf FullMode zurückgesetzt und alle Dateien neu generiert.
# Ursache: Das Modellwechsel-Feedback überschrieb das Original-Feedback. Da das neue
#          Feedback keine Error-Indikatoren (TypeError, NameError, etc.) enthielt,
#          gab _is_targeted_fix_context() False zurück → FullMode wurde aktiviert.
# Lösung: Modellwechsel-Info wird jetzt PREPENDED statt appended. Das Original-Feedback
#         mit den Error-Indikatoren bleibt erhalten, sodass PatchMode aktiv bleibt.
# Betroffene Dateien: backend/dev_loop_feedback.py

----------------------------------------
Version 0.8 - 02.02.2026
----------------------------------------

# ÄNDERUNG [02.02.2026]: dependency_checker – try/except, packaging.version, Unit-Tests
# check_dependency und detect_package_type mit Fehlerbehandlung und deutschem Log-Format;
# compare_versions nutzt packaging.version (PEP 440); Tests in tests/dependency_checker_test.py.
# Betroffene Dateien: agents/dependency_checker.py, requirements.txt, tests/dependency_checker_test.py

# ÄNDERUNG [02.02.2026]: Archive-Pipeline – nur erfolgreiche Projekte standardmäßig
# complete_project archiviert Projekte mit status=error nur bei allow_error_archives=True.
# Betroffene Dateien: backend/library_manager.py

----------------------------------------
Version 0.7 - 29.01.2026
----------------------------------------

# ÄNDERUNG 29.01.2026: WebSocket-Timeout stabilisiert
# WebSocket-Verbindung trennt erst nach mehreren Timeouts, um Disconnects
# bei hoher UI-Last (z.B. Memory-Phase) zu vermeiden.
# Betroffene Dateien: backend/app_state.py, backend/routers/core.py

# ÄNDERUNG 29.01.2026: WebSocket Host-Fallback und Debug-UI
# Fallback von localhost auf 127.0.0.1 im Frontend-Hook; Debug-UI fuer WS-Logs.
# Betroffene Dateien: frontend/src/hooks/useWebSocket.js, ui_mockups/ws_debug.html

# ÄNDERUNG 29.01.2026: Backend als Paket initialisiert
# __init__.py hinzugefuegt, damit uvicorn das lokale Backend korrekt importiert.
# Betroffene Dateien: backend/__init__.py

----------------------------------------
Version 0.6 - 24.01.2026
----------------------------------------

# ÄNDERUNG 24.01.2026: Umfassende Projektregeln-Compliance
# Folgende Korrekturen wurden durchgeführt:
#
# 1. App.jsx Refactoring (753 → 284 Zeilen)
#    - useWebSocket Hook extrahiert → hooks/useWebSocket.js
#    - useConfig Hook extrahiert → hooks/useConfig.js
#    - AgentCard Komponente extrahiert → components/AgentCard.jsx
#    - NavigationHeader extrahiert → components/NavigationHeader.jsx
#
# 2. Code-Duplikation beseitigt
#    - agents/agent_utils.py erstellt mit zentraler get_model_from_config()
#    - combine_project_rules() Hilfsfunktion hinzugefügt
#    - 8 Agent-Dateien aktualisiert um zentrale Utils zu verwenden
#
# 3. Kommentare auf Deutsch übersetzt
#    - Frontend-Dateien: Mock-Daten Kommentare übersetzt
#    - WebSocket/Config Hooks: Alle Kommentare auf Deutsch
#
# 4. Header-Kommentare hinzugefügt
#    - Alle Python-Dateien: Author, Datum, Version, Beschreibung
#    - Alle Frontend-Dateien: JSDoc-Format Header
#
# 5. Dummy-/Fallback-Werte gekennzeichnet
#    - MOCK-DATEN: Kommentare in allen Office-Komponenten
#    - FALLBACK: Kommentare in config_validator.py
#
# Betroffene Dateien:
#   Neue Dateien:
#     - frontend/src/hooks/useWebSocket.js
#     - frontend/src/hooks/useConfig.js
#     - frontend/src/components/AgentCard.jsx
#     - frontend/src/components/NavigationHeader.jsx
#     - agents/agent_utils.py
#   Aktualisierte Dateien:
#     - frontend/src/App.jsx (refaktoriert)
#     - agents/*.py (8 Dateien)
#     - frontend/src/*Office.jsx (8 Dateien)
#     - frontend/src/MainframeHub.jsx
#     - frontend/src/BudgetDashboard.jsx

----------------------------------------
Version 0.5 - 24.01.2026
----------------------------------------

# ÄNDERUNG 24.01.2026: Projektregeln-Compliance Initialisierung
# CLAUDE.md Projektregeln-Datei erstellt
# CHANGELOG.txt (diese Datei) erstellt
# Betroffene Dateien: CLAUDE.md, CHANGELOG.txt

----------------------------------------
Version 0.4 - 24.01.2026
----------------------------------------

# ÄNDERUNG 24.01.2026: Max Retries Slider hinzugefügt
# Neuer Slider im Mainframe Hub zur Konfiguration der maximalen Wiederholungsversuche
# Betroffene Dateien: frontend/src/MainframeHub.jsx, config.yaml
# Commit: a8f0fff

----------------------------------------
Version 0.3 - 24.01.2026
----------------------------------------

# ÄNDERUNG 24.01.2026: Individuelle Agent Office Views
# Neue Office-Ansichten für jeden Agent mit einzigartigen Farbthemen
# - CoderOffice.jsx (blau)
# - DBDesignerOffice.jsx (indigo)
# - DesignerOffice.jsx (pink)
# - ResearcherOffice.jsx (cyan)
# - ReviewerOffice.jsx (gelb)
# - SecurityOffice.jsx (rot)
# - TechStackOffice.jsx (violett)
# - TesterOffice.jsx (orange)
# Betroffene Dateien: frontend/src/*Office.jsx, frontend/src/index.css
# Commit: 87df098

----------------------------------------
Version 0.2 - 24.01.2026
----------------------------------------

# ÄNDERUNG 24.01.2026: Budget Dashboard und UI-Verbesserungen
# - Neues Budget Dashboard für Kostenüberwachung
# - Mainframe Hub als zentrale Steuerung
# - Verbesserte UI-Komponenten
# - WebSocket-Integration für Echtzeit-Updates
# Betroffene Dateien:
#   - frontend/src/BudgetDashboard.jsx
#   - frontend/src/MainframeHub.jsx
#   - frontend/src/App.jsx
#   - backend/api.py
# Commit: 4bb1232

----------------------------------------
Version 0.1 - Initial Release
----------------------------------------

# ÄNDERUNG [Datum unbekannt]: Initiales Projekt-Setup
# Multi-Agent POC (AgentSmith) - Grundlegende Architektur
# - CrewAI Framework Integration
# - OpenRouter API Anbindung
# - FastAPI Backend
# - React Frontend
# - 10+ spezialisierte KI-Agenten:
#   * Meta-Orchestrator
#   * Coder Agent
#   * Reviewer Agent
#   * Tester Agent
#   * Designer Agent
#   * Database Designer Agent
#   * Researcher Agent
#   * Security Agent
#   * TechStack Architect Agent
#   * Model Architect Agent
#   * Memory Agent
# - Budget Tracking System
# - Sandbox Code-Validierung
# - Security Utils (Path Traversal, Command Injection Schutz)
# Betroffene Dateien: Komplettes Repository
# Commits: 2053a86, 0a2828c

========================================
ERLEDIGTE TODOs (24.01.2026)
========================================

# [ERLEDIGT] Code-Duplikation beseitigt
# _get_model_from_config() in agents/agent_utils.py zentralisiert
# combine_project_rules() hinzugefügt

# [ERLEDIGT] Dateigrößen-Refactoring
# App.jsx: 753 → 284 Zeilen (unter 500)
# main.py: 455 Zeilen (war bereits unter 500)

# [ERLEDIGT] Header-Kommentare hinzugefügt
# Alle Python- und Frontend-Dateien mit Autor-Header versehen

========================================
OFFENE TODOs
========================================

# TODO: E2E Tests mit Playwright erstellen
# Wichtigste User-Journeys abdecken

# TODO: Test-Coverage verbessern
# pytest-cov einrichten, Coverage auf 70%+ bringen

========================================
HINWEISE
========================================

- Alle Änderungen müssen in diesem Format dokumentiert werden (Regel 9)
- Bei größeren Änderungen: Zusätzlich im Code als Kommentar
- Commit-Messages auf Deutsch (Regel 12)
- Bei Regelverstößen: Sofortige Korrektur erforderlich
