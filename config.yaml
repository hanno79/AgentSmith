openai_api_base: https://openrouter.ai/api/v1
openai_api_key: ${OPENAI_API_KEY}
mode: test
project_type: webapp
include_designer: true
max_retries: 50
max_model_attempts: 5
parallel_file_generation:
  enabled: true
  max_workers:
targeted_fix:
  enabled: true
  max_files: 7
  prefer_fix_below_files: 5
enable_file_by_file_mode: true
agent_timeouts:
  default: 750
  coder: 1800
  reviewer: 1200
  tester: 300
  security: 300
  researcher: 900
  planner: 900
  designer: 300
  fix: 750
  task_deriver: 300
  orchestrator: 750
  database_designer: 750
  techstack_architect: 750
token_limits:
  default: 8192
  # AENDERUNG 21.02.2026: Fix 59e — 131072→65536 damit max_tokens + Input-Tokens
  # nicht das Context-Limit von Free-Modellen (131072) sprengt
  coder: 65536
  tester: 8192
  reviewer: 65536
  planner: 65536
  designer: 8192
  security: 4096
  researcher: 8192
  orchestrator: 4096
  fix: 65536
  task_deriver: 24576
  discovery: 4096
  validator: 12288
  database_designer: 8192
  techstack_architect: 8192
max_prompt_tokens: 80000
parallel_patch:
  enabled: true
  max_files_per_group: 3
  min_files_for_parallel: 2
  min_chars_for_parallel: 8000
  truncation_guard: true
  max_concurrent_groups: 8
  max_chars_per_group: 15000
security_max_retries: 10
vier_augen:
  enabled: true
  timeout_factor: 0.5
  skip_on_error: true
  log_dissent: true
dependency_agent:
  auto_install: true
  check_vulnerabilities: true
  cache_inventory: 300
  max_duration: 300
models:
  test:
    meta_orchestrator:
      primary: openrouter/meta-llama/llama-3.3-70b-instruct:free
      fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/openai/gpt-oss-120b:free
      - openrouter/meta-llama/llama-3.1-405b-instruct:free
      - openrouter/z-ai/glm-4.5-air:free
    orchestrator:
      primary: openrouter/meta-llama/llama-3.3-70b-instruct:free
      fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/openai/gpt-oss-120b:free
      - openrouter/meta-llama/llama-3.1-405b-instruct:free
      - openrouter/z-ai/glm-4.5-air:free
    researcher:
      primary: openrouter/z-ai/glm-4.5-air:free
      fallback:
      - openrouter/nousresearch/hermes-3-llama-3.1-405b:free
      - openrouter/meta-llama/llama-3.3-70b-instruct:free
      - openrouter/openai/gpt-oss-120b:free
      - openrouter/deepseek/deepseek-r1-0528:free
    coder:
      primary: openrouter/qwen/qwen3-coder:free
      fallback:
      - openrouter/openai/gpt-oss-120b:free
      - openrouter/meta-llama/llama-3.3-70b-instruct:free
      - openrouter/stepfun/step-3.5-flash:free
      - openrouter/arcee-ai/trinity-large-preview:free
      extended_fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/z-ai/glm-4.5-air:free
      - openrouter/google/gemma-3-27b-it:free
      - openrouter/mistralai/mistral-small-3.1-24b-instruct:free
    tester:
      primary: openrouter/openai/gpt-oss-120b:free
      fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/meta-llama/llama-3.3-70b-instruct:free
      - openrouter/qwen/qwen3-coder:free
      - openrouter/nvidia/nemotron-3-nano-30b-a3b:free
      extended_fallback:
      - openrouter/arcee-ai/trinity-large-preview:free
      - openrouter/z-ai/glm-4.5-air:free
      - openrouter/google/gemma-3-27b-it:free
      - openrouter/mistralai/mistral-small-3.1-24b-instruct:free
      - openrouter/xiaomi/mimo-v2-flash:free
    designer:
      primary: openrouter/nvidia/nemotron-3-nano-30b-a3b:free
      fallback:
      - openrouter/mistralai/mistral-small-3.1-24b-instruct:free
      - openrouter/openai/gpt-oss-20b:free
      - openrouter/arcee-ai/trinity-large-preview:free
      - openrouter/qwen/qwen2.5-vl-7b-instruct:free
    database_designer:
      primary: openrouter/qwen/qwen3-coder:free
      fallback:
      - openrouter/openai/gpt-oss-120b:free
      - openrouter/google/gemma-3-27b-it:free
      - openrouter/arcee-ai/trinity-large-preview:free
      - openrouter/nousresearch/hermes-3-llama-3.1-405b:free
    security:
      primary: openrouter/openai/gpt-oss-120b:free
      fallback:
      - openrouter/meta-llama/llama-3.3-70b-instruct:free
      - openrouter/nousresearch/hermes-3-llama-3.1-405b:free
      - openrouter/qwen/qwen3-coder:free
      - openrouter/z-ai/glm-4.5-air:free
      extended_fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/arcee-ai/trinity-large-preview:free
      - openrouter/google/gemma-3-27b-it:free
      - openrouter/xiaomi/mimo-v2-flash:free
    reviewer:
      primary: openrouter/deepseek/deepseek-r1-0528:free
      fallback:
      - openrouter/meta-llama/llama-3.3-70b-instruct:free
      - openrouter/qwen/qwen3-coder:free
      - openrouter/openai/gpt-oss-120b:free
      - openrouter/meta-llama/llama-3.1-405b-instruct:free
      extended_fallback:
      - openrouter/arcee-ai/trinity-large-preview:free
      - openrouter/z-ai/glm-4.5-air:free
      - openrouter/google/gemma-3-27b-it:free
    techstack_architect:
      primary: openrouter/meta-llama/llama-3.3-70b-instruct:free
      fallback:
      - openrouter/openai/gpt-oss-120b:free
      - openrouter/meta-llama/llama-3.1-405b-instruct:free
      - openrouter/z-ai/glm-4.5-air:free
      - openrouter/arcee-ai/trinity-large-preview:free
    documentation_manager:
      primary: openrouter/meta-llama/llama-3.3-70b-instruct:free
      fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/openai/gpt-oss-120b:free
      - openrouter/google/gemma-3-27b-it:free
      - openrouter/arcee-ai/trinity-large-preview:free
    test_generator:
      primary: openrouter/meta-llama/llama-3.3-70b-instruct:free
      fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/qwen/qwen3-coder:free
      - openrouter/openai/gpt-oss-120b:free
      - openrouter/z-ai/glm-4.5-air:free
    orchestrator_validator:
      primary: openrouter/meta-llama/llama-3.3-70b-instruct:free
      fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/openai/gpt-oss-120b:free
      - openrouter/qwen/qwen3-coder:free
      - openrouter/z-ai/glm-4.5-air:free
    validator:
      primary: openrouter/meta-llama/llama-3.3-70b-instruct:free
      fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/qwen/qwen3-235b-a22b:free
      - openrouter/openai/gpt-oss-120b:free
    reporter:
      primary: openrouter/meta-llama/llama-3.3-70b-instruct:free
      fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/qwen/qwen3-235b-a22b:free
      - openrouter/openai/gpt-oss-120b:free
    planner:
      primary: openrouter/openai/gpt-oss-120b:free
      fallback:
      - openrouter/meta-llama/llama-3.3-70b-instruct:free
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/qwen/qwen3-coder:free
      - openrouter/z-ai/glm-4.5-air:free
    fix:
      primary: openrouter/openai/gpt-oss-120b:free
      fallback:
      - openrouter/meta-llama/llama-3.3-70b-instruct:free
      - openrouter/qwen/qwen3-coder:free
      - openrouter/arcee-ai/trinity-large-preview:free
      - openrouter/mistralai/mistral-small-3.1-24b-instruct:free
      extended_fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/z-ai/glm-4.5-air:free
      - openrouter/google/gemma-3-27b-it:free
    task_deriver:
      primary: openrouter/meta-llama/llama-3.3-70b-instruct:free
      fallback:
      - openrouter/deepseek/deepseek-r1-0528:free
      - openrouter/openai/gpt-oss-120b:free
      - openrouter/qwen/qwen3-coder:free
      - openrouter/z-ai/glm-4.5-air:free
  production:
    meta_orchestrator:
      primary: openrouter/deepseek/deepseek-r1-0528
      fallback:
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/google/gemini-2.5-flash
      - openrouter/qwen/qwen-3
      - openrouter/baidu/ernie-5.0
    orchestrator:
      primary: openrouter/google/gemini-2.5-flash
      fallback:
      - openrouter/deepseek/deepseek-r1-0528
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/qwen/qwen-3
      - openrouter/baidu/ernie-5.0
    researcher:
      primary: openrouter/mistralai/mistral-medium-3.1
      fallback:
      - openrouter/google/gemini-2.5-flash
      - openrouter/deepseek/deepseek-r1-0528
      - openrouter/baidu/ernie-5.0
      - openrouter/minimax/minimax-m2.1
    coder:
      primary: openrouter/moonshotai/kimi-k2.5
      fallback:
      - openrouter/minimax/minimax-m2.5
      - openrouter/qwen/qwen3-coder-next
      - openrouter/z-ai/glm-5
      - openrouter/anthropic/claude-sonnet-4.5
    tester:
      primary: openrouter/deepseek/deepseek-r1-0528
      fallback:
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/z-ai/glm-4.7
      - openrouter/qwen/qwen-3
      - openrouter/google/gemini-2.5-flash
    designer:
      primary: openrouter/google/gemini-2.5-flash
      fallback:
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/deepseek/deepseek-r1-0528
      - openrouter/qwen/qwen-3
      - openrouter/baidu/ernie-5.0
    database_designer:
      primary: openrouter/qwen/qwen3-coder-flash
      fallback:
      - openrouter/z-ai/glm-4.7
      - openrouter/deepseek/deepseek-r1-0528
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/google/gemini-2.5-flash
    security:
      primary: openrouter/google/gemini-3-flash-preview
      fallback:
      - openrouter/deepseek/deepseek-r1-0528
      - openrouter/z-ai/glm-4.7
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/qwen/qwen-3
    reviewer:
      primary: openrouter/deepseek/deepseek-chat-v3.1
      fallback:
      - openrouter/qwen/qwen3-coder-flash
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/anthropic/claude-haiku-4.5
      - openrouter/nvidia/llama-3.1-nemotron-ultra-253b-v1
    techstack_architect:
      primary: openrouter/qwen/qwen3-coder-flash
      fallback:
      - openrouter/amazon/nova-pro-v1
      - openrouter/google/gemini-2.5-flash
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/baidu/ernie-5.0
    documentation_manager:
      primary: openrouter/deepseek/deepseek-r1-0528
      fallback:
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/google/gemini-2.5-flash
      - openrouter/qwen/qwen-3
    test_generator:
      primary: openrouter/deepseek/deepseek-r1-0528
      fallback:
      - openrouter/qwen/qwen-3
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/google/gemini-2.5-flash
      - openrouter/stepfun/step-3.5-flash:free
    orchestrator_validator:
      primary: openrouter/deepseek/deepseek-r1-0528
      fallback:
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/google/gemini-2.5-flash
      - openrouter/qwen/qwen-3
      - openrouter/baidu/ernie-5.0
    validator:
      primary: openrouter/deepseek/deepseek-r1-0528
      fallback:
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/google/gemini-2.5-flash
      - openrouter/qwen/qwen-3
    reporter:
      primary: openrouter/deepseek/deepseek-r1-0528
      fallback:
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/google/gemini-2.5-flash
      - openrouter/qwen/qwen-3
    planner:
      primary: openrouter/openai/gpt-5.2-codex
      fallback:
      - openrouter/google/gemini-3-flash-preview
      - openrouter/nousresearch/hermes-3-llama-3.1-405b
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/qwen/qwen-3
    fix:
      primary: openrouter/moonshotai/kimi-k2.5
      fallback:
      - openrouter/minimax/minimax-m2
      - openrouter/z-ai/glm-4.7
      - openrouter/google/gemini-2.5-flash
      - openrouter/qwen/qwen3-coder:free
    task_deriver:
      primary: openrouter/deepseek/deepseek-r1-0528
      fallback:
      - openrouter/mistralai/mistral-medium-3.1
      - openrouter/google/gemini-2.5-flash
      - openrouter/qwen/qwen-3
  premium:
    meta_orchestrator:
      primary: openrouter/google/gemini-3-pro-preview
      fallback:
      - openrouter/anthropic/claude-opus-4.5
      - openrouter/openai/gpt-5.1
      - openrouter/x-ai/grok-4.1-fast
      - openrouter/meta-llama/llama-4-scout
    orchestrator:
      primary: openrouter/google/gemini-3-pro-preview
      fallback:
      - openrouter/anthropic/claude-opus-4.5
      - openrouter/openai/gpt-5.1
      - openrouter/x-ai/grok-4.1-fast
      - openrouter/meta-llama/llama-4-scout
    researcher:
      primary: openrouter/google/gemini-3-pro-preview
      fallback:
      - openrouter/x-ai/grok-4.1-fast
      - openrouter/anthropic/claude-opus-4.5
      - openrouter/openai/gpt-5.1
      - openrouter/meta-llama/llama-4-scout
    coder:
      primary: openrouter/openai/gpt-5.2-pro
      fallback:
      - openrouter/anthropic/claude-opus-4.6
      - openrouter/google/gemini-3-pro-preview
      - openrouter/minimax/minimax-m2.1
      - openrouter/z-ai/glm-4.7
    tester:
      primary: openrouter/anthropic/claude-opus-4.6
      fallback:
      - openrouter/openai/gpt-5.1
      - openrouter/google/gemini-3-pro-preview
      - openrouter/x-ai/grok-4.1-fast
      - openrouter/openai/gpt-5.2-pro
    designer:
      primary: openrouter/google/gemini-3-pro-preview
      fallback:
      - openrouter/anthropic/claude-opus-4.5
      - openrouter/openai/gpt-5.1
      - openrouter/minimax/minimax-m2.1
      - openrouter/meta-llama/llama-4-scout
    database_designer:
      primary: openrouter/openai/gpt-5.2-pro
      fallback:
      - openrouter/anthropic/claude-haiku-4.5
      - openrouter/google/gemini-3-pro-preview
      - openrouter/minimax/minimax-m2.1
      - openrouter/amazon/nova-pro-v1
    security:
      primary: openrouter/openai/gpt-5.2-pro
      fallback:
      - openrouter/anthropic/claude-haiku-4.5
      - openrouter/google/gemini-3-pro-preview
      - openrouter/deepseek/deepseek-v3.2-exp
      - openrouter/x-ai/grok-4.1-fast
    reviewer:
      primary: openrouter/deepseek/deepseek-v3.2
      fallback:
      - openrouter/google/gemini-3-pro-preview
      - openrouter/openai/gpt-5.1
      - openrouter/x-ai/grok-4.1-fast
      - openrouter/openai/gpt-5.2-pro
    techstack_architect:
      primary: openrouter/x-ai/grok-4.1-fast
      fallback:
      - openrouter/google/gemini-3-pro-preview
      - openrouter/anthropic/claude-opus-4.5
      - openrouter/openai/gpt-5.1
      - openrouter/meta-llama/llama-4-scout
    documentation_manager:
      primary: openrouter/anthropic/claude-opus-4.5
      fallback:
      - openrouter/google/gemini-3-pro-preview
      - openrouter/openai/gpt-5.1
      - openrouter/x-ai/grok-4.1-fast
    test_generator:
      primary: openrouter/anthropic/claude-opus-4.5
      fallback:
      - openrouter/google/gemini-3-pro-preview
      - openrouter/openai/gpt-5.1
      - openrouter/x-ai/grok-4.1-fast
    orchestrator_validator:
      primary: openrouter/anthropic/claude-opus-4.5
      fallback:
      - openrouter/openai/gpt-5.1
      - openrouter/google/gemini-3-pro-preview
      - openrouter/x-ai/grok-4.1-fast
      - openrouter/openai/gpt-5.2-pro
    validator:
      primary: openrouter/anthropic/claude-opus-4.5
      fallback:
      - openrouter/openai/gpt-5.1
      - openrouter/google/gemini-3-pro-preview
      - openrouter/x-ai/grok-4.1-fast
    reporter:
      primary: openrouter/anthropic/claude-opus-4.5
      fallback:
      - openrouter/openai/gpt-5.1
      - openrouter/google/gemini-3-pro-preview
      - openrouter/x-ai/grok-4.1-fast
    planner:
      primary: openrouter/openai/gpt-5.2-codex
      fallback:
      - openrouter/anthropic/claude-opus-4.6
      - openrouter/google/gemini-3-pro-preview
      - openrouter/x-ai/grok-4.1-fast
      - openrouter/deepseek/deepseek-v3.2-speciale
    fix:
      primary: openrouter/openai/gpt-5.2-pro
      fallback:
      - openrouter/moonshotai/kimi-k2.5
      - openrouter/google/gemini-3-pro-preview
      - openrouter/minimax/minimax-m2.1
      - openrouter/anthropic/claude-opus-4.6
    task_deriver:
      primary: openrouter/anthropic/claude-opus-4.5
      fallback:
      - openrouter/openai/gpt-5.1
      - openrouter/google/gemini-3-pro-preview
      - openrouter/x-ai/grok-4.1-fast
templates:
  cli:
    global:
    - Folge PEP8-Konventionen.
    - Nutze argparse für CLI-Argumente.
    - Füge eine --help-Funktion hinzu.
    - Vermeide externe Abhängigkeiten.
    security:
    - Prüfe auf unsichere subprocess-Aufrufe.
    coder:
    - Strukturiere Code in Funktionen statt in langen Scripts.
    - Verwende logging statt print für Statusmeldungen.
    reviewer:
    - Prüfe, ob CLI-Hilfe und Fehlermeldungen korrekt funktionieren.
    orchestrator:
    - Stelle sicher, dass CLI-Befehle nachvollziehbar dokumentiert sind.
  webapp:
    global:
    - Nutze MVC-Struktur oder ähnliche Schichtenarchitektur.
    - Halte HTML/CSS getrennt von Logik.
    - UI-Komponenten müssen responsiv sein.
    - Achte auf Barrierefreiheit und semantisches HTML.
    security:
    - Prüfe auf SQL-Injection (parametrized queries).
    - Prüfe auf XSS (kein unsafe innerHTML).
    - Prüfe auf CSRF-Schutz.
    - Warne vor eval() oder unsafe-inline CSS/JS.
    coder:
    - Nutze moderne Frameworks (Flask, FastAPI, React o.Ä.).
    - Trenne Backend- und Frontend-Code sauber.
    - Füge Beispielrouten und Unit Tests hinzu.
    - 'WICHTIG: Nutze ''with app.app_context():'' statt ''@app.before_first_request''
      (Flask 2.3+ deprecated).'
    - 'WICHTIG: Importiere Markup von ''markupsafe'', NICHT von ''flask''.'
    - Stelle sicher, dass 'enumerate' in Templates verfügbar ist (z.B. 
      app.jinja_env.globals.update(enumerate=enumerate)).
    reviewer:
    - Prüfe Code auf XSS/CSRF-Schutz und saubere API-Trennung.
    designer:
    - Vermeide KI-typische Farbverläufe.
    - Verwende klare Kontraste und einfache Layouts.
    orchestrator:
    - Sorge dafür, dass UI, Backend und Tests konsistent dokumentiert sind.
    researcher:
    - Prüfe Quellen auf Aktualität (Datum der Doku).
    - Fasse lange technische Inhalte präzise zusammen.
    - Gib Quellenangaben (URLs) an.
    database_designer:
    - Erstelle immer ein normalisiertes Schema (mindestens 3NF).
    - Definiere PRIMARY KEY für jede Tabelle.
    - Nutze FOREIGN KEY mit ON DELETE/ON UPDATE Aktionen.
    - Erstelle ein Mermaid ERD-Diagramm zur Visualisierung.
    - Empfehle sinnvolle Indexes für häufige Abfragen.
    - Dokumentiere das Schema mit Kommentaren.
    techstack_architect:
    - Analysiere die Anforderungen gründlich vor der Entscheidung.
    - Wähle den passendsten Tech-Stack (Python, Node.js, C++, etc.).
    - Gib IMMER komplette install_command und run_command an.
    - Gib IMMER einen gültigen JSON-Block als Output.
    - Begründe deine Entscheidung kurz im reasoning-Feld.
  ml:
    global:
    - Strukturiere Code in Data, Model, Train, Evaluate.
    - Speichere Modelle reproduzierbar ab (z. B. joblib/pickle).
    - Implementiere Logging der Metriken.
    coder:
    - Trenne Trainingslogik vom Datapreprocessing.
    - Verwende argparse für Parametersteuerung.
    reviewer:
    - Prüfe Trainings- und Testcode auf Reproduzierbarkeit.
    orchestrator:
    - Erstelle Dokumentation mit Trainingsparametern und Ergebnissen.
external_specialists:
  enabled: true
  timeout_seconds: 120
  coderabbit:
    enabled: true
    mode: blocking
    cli_path: /home/hanno/.local/bin/coderabbit-wrapper.sh
    use_wsl: true
    timeout_seconds: 120
    cooldown_seconds: 300
  exa_search:
    enabled: true
    api_key: ${EXA_API_KEY}
    timeout_seconds: 60
    max_results: 10
    cooldown_seconds: 60
  augment_context:
    enabled: true
    auto_activate: true
    use_for_context: true
    cli_command: npx @augmentcode/auggie
    timeout_seconds: 300
    cooldown_seconds: 60
    default_prompt: Analysiere die Projektstruktur und Architektur
  context7_docs:
    enabled: true
    timeout_seconds: 30
    cooldown_seconds: 30
  reftools_docs:
    enabled: true
    api_key: ${REF_TOOLS_API_KEY}
    timeout_seconds: 30
    cooldown_seconds: 30
doc_enrichment:
  enabled: true
  context7:
    enabled: true
    timeout_seconds: 30
  ref_tools:
    enabled: true
    api_key: ${REF_TOOLS_API_KEY}
    timeout_seconds: 30
  max_docs_chars: 3000
  max_total_chars: 10000
testing:
  ui_test_routing:
    pyqt_desktop: pytest_qt
    pyside_desktop: pytest_qt
    tkinter_desktop: pyautogui
    electron_desktop: playwright
    default_desktop: auto_detect
  fallback_strategy:
    pytest_qt: pyautogui
    pyautogui: skip_with_warning
  timeouts:
    pytest_qt: 120
    pyautogui: 60
    playwright: 30
smoke_test:
  enabled: true
  server_timeout: 90
  playwright_timeout: 15000
  block_on_console_errors: false
  skip_on_error: true
  max_retries: 2
docker:
  enabled: true
  fallback_to_host: true
  memory_limit: 512m
  cpu_limit: 1
  # AENDERUNG 24.02.2026: Fix 78 — Docker-Timeouts verdoppelt
  # ROOT-CAUSE-FIX:
  # Symptom: Docker Install+Test fehlgeschlagen: Timeout nach 300s
  # Ursache: npm install bei grossen Projekten (Next.js + Shadcn) braucht laenger
  # Loesung: Grosszuegigere Timeouts (Phase 1: Korrektheit vor Optimierung)
  timeout_install: 600
  timeout_test: 300
  timeout_run: 120
  cleanup_on_success: true
  images:
    python: python:3.11-slim
    nodejs: node:20-alpine
    playwright: mcr.microsoft.com/playwright:v1.40.0-jammy
  project_container:
    enabled: true
    base_images:
      javascript: node:20-slim
      python: python:3.11-slim
    port_range_start: 3000
    memory_limit: 1g
    cpu_limit: 2
    # AENDERUNG 24.02.2026: Fix 78 — Project Container Timeouts verdoppelt
    install_timeout: 600
    server_timeout: 120
    test_timeout: 300
# AENDERUNG 21.02.2026: Multi-Tier Claude SDK Modelle
# Jede Agent-Rolle bekommt das passende Claude-Modell:
# - Opus: Komplexe Denkaufgaben (Research, Architektur)
# - Sonnet: Standard-Aufgaben (Code-Generierung, Review, Design)
# - Haiku: Einfache/schnelle Aufgaben (Fixes, Einzeldateien, Tests)
# OpenRouter bleibt als Fallback wenn Claude SDK Rate-Limits erreicht.
claude_sdk:
  enabled: true
  default_model: sonnet
  max_retries: 5
  # AENDERUNG 22.02.2026: Fix 72b — Tier-2 (Opus) max Versuche
  # AENDERUNG 24.02.2026: Fix 78 — Erhoeht auf 2 (mit Pre-Call Cooldown lohnt sich ein zweiter Versuch)
  # ROOT-CAUSE-FIX:
  # Symptom: Planner/Reviewer treffen IMMER auf rate_limit_event nach 5+ CLI-Aufrufen
  # Ursache: TPM-Budget nach TaskDeriver+Researcher+TechStack+DBDesigner+Designer erschoepft
  # Loesung: 2 Versuche + Pre-Call Cooldown + erhoehter Backoff
  max_retries_tier2: 2
  # AENDERUNG 24.02.2026: Fix 78 — Rate-Limit Backoff Basis (vorher hardcoded 30s)
  rate_limit_backoff_base: 45
  # AENDERUNG 24.02.2026: Fix 78 — Pre-Call Cooldown in Sekunden (TPM-Limit Schutz)
  # ROOT-CAUSE-FIX:
  # Symptom: Planner/Reviewer treffen IMMER auf rate_limit_event im async SDK
  # Ursache: Nach 5+ CLI-Aufrufen ist das TPM-Limit erreicht bevor Planner/Reviewer dran sind
  # Loesung: Konfigurierbarer Pre-Call Cooldown laesst Token-Budget sich erholen
  pre_call_cooldown:
    planner: 45
    reviewer: 45
  # AENDERUNG 22.02.2026: Fix 74d — Tier-1 Non-Coder max 2 Versuche
  # ROOT-CAUSE-FIX: DB-Designer 3x 750s = 37.5 Min Worst-Case
  max_retries_tier1_non_coder: 2
  # AENDERUNG 22.02.2026: Fix 74a — Mindestlaenge fuer SDK-Antworten
  # ROOT-CAUSE-FIX: SDK liefert 111/169 Zeichen Reasoning-Text statt Ergebnis
  min_response_chars: 200
  # AENDERUNG 22.02.2026: Fix 71 — max_turns pro Rolle (Extended Thinking + Tool Use)
  # ROOT-CAUSE-FIX:
  # Symptom: Leere Antwort vom SDK (error_max_turns)
  # Ursache: max_turns=1 reicht nicht fuer Extended Thinking + Tool Use (braucht 3+ Turns)
  # Loesung: Konfigurierbare max_turns pro Rolle
  default_max_turns: 10
  max_turns_by_role:
    # AENDERUNG 24.02.2026: Fix 76a — CLI-Rollen max_turns angepasst (vorher ignoriert wegen hardcoded 1)
    researcher: 10       # CLI-Modus: Research braucht mehrere Turns, aber weniger als async SDK
    techstack_architect: 10
    coder: 10
    reviewer: 10
    # AENDERUNG 24.02.2026: Fix 76e — Grosszuegige 10 Turns fuer ALLE Rollen (Phase 1: Korrektheit)
    # Erst pruefen ob alle Rollen sauber durchlaufen, dann in Phase 2 optimieren
    designer: 10
    db_designer: 10
    planner: 10
    documentation_manager: 10
    security: 10
    fix: 10
    tester: 10
    task_deriver: 10
    analyst: 10
    konzepter: 10
  agent_models:
    # Tier 1: Opus — Komplexe Denkaufgaben (nur techstack_architect bleibt, kurze Ausgabe)
    # AENDERUNG 22.02.2026: Fix 72a — researcher: opus → sonnet (TPM-Rate-Limit-Fix)
    # ROOT-CAUSE-FIX:
    # Symptom: Researcher SDK-Versuche scheitern alle (~10 Min Zeitverlust)
    # Ursache: Opus TPM-Limits bei langen Research-Outputs erschoepft
    # Loesung: Sonnet fuer Researcher (10x hoehere Limits, weiterhin hohe Qualitaet)
    researcher: sonnet
    techstack_architect: opus
    # Tier 2: Sonnet — Standard-Aufgaben
    coder: sonnet
    # AENDERUNG 24.02.2026: Fix 78 — Reviewer und Planner auf Opus
    # ROOT-CAUSE-FIX:
    # Symptom: Reviewer/Planner Sonnet liefern unzureichende Ergebnisse bei Rate-Limit Stress
    # Ursache: Sonnet braucht mehr Turns fuer komplexe JSON/Review-Outputs
    # Loesung: Opus fuer hoehere Qualitaet bei weniger Turns (kosteneffizienter bei Rate-Limits)
    reviewer: opus
    designer: sonnet
    db_designer: sonnet
    planner: opus
    documentation_manager: sonnet
    security: sonnet
    # Tier 3: Haiku — Einfache/schnelle Aufgaben
    fix: haiku
    tester: haiku
    # AENDERUNG 24.02.2026: Fix 76d — TaskDeriver auf Opus (Grundlage fuer gesamten Workflow)
    # ROOT-CAUSE-FIX:
    # Symptom: TaskDeriver mit Haiku erzeugt nur 1 generischen Task
    # Ursache: Haiku zu schwach fuer komplexe Ziel-Dekomposition
    # Loesung: Opus fuer hoechste Qualitaet bei der Task-Ableitung
    task_deriver: opus
    # AENDERUNG 24.02.2026: Fix 76b — Analyst/Konzepter auf Sonnet (Analyse braucht Qualitaet)
    analyst: sonnet
    konzepter: sonnet
  # AENDERUNG 22.02.2026: Fix 75 — CLI-Modus fuer einfache Rollen
  # ROOT-CAUSE-FIX:
  # Symptom: DB-Designer/Designer brauchen 2+ Min fuer einfache Aufgaben
  # Ursache: allowed_tools=[] im SDK = ALLE Tools → Claude liest Dateien statt zu antworten
  # Loesung: `claude -p` Subprozess mit --max-turns 1 → keine Tools, direkte Antwort
  # NICHT in cli_mode: coder, reviewer (brauchen Tool-Use im SDK async-Modus)
  # AENDERUNG 24.02.2026: Fix 76b — Neue Rollen hinzugefuegt
  cli_mode_roles:
  - db_designer
  - designer
  - researcher
  - techstack_architect
  - security
  # AENDERUNG 24.02.2026: Fix 77 — Planner aus CLI-Modus entfernt
  # ROOT-CAUSE-FIX:
  # Symptom: Planner liefert 2x leere Antwort via `claude -p`
  # Ursache: Planner braucht komplexen strukturierten JSON-Output, CLI-Modus unzuverlaessig
  # Loesung: Planner nutzt async SDK (_run_sync) fuer robustere JSON-Generierung
  # - planner  (→ nutzt jetzt async SDK)
  - documentation_manager
  - fix
  - tester
  - task_deriver
  - analyst
  - konzepter
